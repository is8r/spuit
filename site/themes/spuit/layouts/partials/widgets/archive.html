{{ if not (eq (len .Site.Pages) 0) }}
<div class="widget">
  <h5>Archives</h5>
  <ul>
    {{ range $value := (where .Site.RegularPages "Type" "post").GroupByDate "2006-01" }}
    {{ $url := (index $value.Pages 0).Date.Format "2006-01" | urlize }}
    <li>
      <a href="{{ $.Site.BaseURL }}post/#{{ $url }}">{{ .Key }}</a>
      <span class="count">({{ len $value.Pages }})</span>
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}
